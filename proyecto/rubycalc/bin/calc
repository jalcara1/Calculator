#!/usr/bin/env rubyA

require 'rubygems'
require 'calculator'
require 'calcex'

#$stdout.print "> "
#$stdout.flush

#text = gets

$calc = Calculator.new()

while true do
  $stdout.print "> "
  $stdout.flush
  text = gets
  
  begin

    if text == nil then
      break
    end
    
     result = $calc.eval(text).to_s

     if $calc.getSalida() == "" then
       print "=> " + result
       puts ""
     else
       print "=> " + result
       print " [" + $calc.getSalida() + "]"
       puts ""
       $calc.limpiarSalida()
     end
  rescue ParseError
    puts "* Parse Error"
  rescue UnrecognizedTokenException
    puts "UnrecognizedTokenException"
  rescue
    puts "En calc"
    puts "Unkown exception"
  end
end
